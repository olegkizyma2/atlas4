# üîß Model 413 & Chat Fix - Quick Reference

## üéØ –í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ (14.10.2025 20:00)

### 1. ‚úÖ –ü–æ–º–∏–ª–∫–∞ 413: Request body too large
**–ë—É–ª–æ:** `ministral-3b` (8K context) - –∑–∞–Ω–∞–¥—Ç–æ –º–∞–ª–æ  
**–°—Ç–∞–ª–æ:** `mistral-nemo` (128K context) - –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–ª—è –≤—Å—å–æ–≥–æ

**–ó–º—ñ–Ω–µ–Ω—ñ —Å—Ç–µ–π–¥–∂—ñ:**
- Stage 2.1 (Plan Tools)
- Stage 2.3 (Verify Item)  
- Stage 3 (Adjust TODO)

### 2. ‚úÖ Timeout –Ω–∞ API –∑–∞–ø–∏—Ç–∞—Ö
**–ë—É–ª–æ:** 10s –¥–ª—è mode_selection, 30s –¥–ª—è chat - –∑–∞–Ω–∞–¥—Ç–æ –º–∞–ª–æ  
**–°—Ç–∞–ª–æ:** 60s –¥–ª—è –≤—Å—ñ—Ö —Å—Ç–µ–π–¥–∂—ñ–≤ - –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–ª—è –ø–æ–≤—ñ–ª—å–Ω–∏—Ö –º–æ–¥–µ–ª–µ–π

### 3. ‚úÖ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ –∑'—è–≤–ª—è—é—Ç—å—Å—è –≤ —á–∞—Ç—ñ
**–ë—É–ª–æ:** WebSocket –ø—ñ–¥–ø–∏—Å–∫–∏ `['logs', 'model3d', 'tts']` - –Ω–µ–º–∞—î chat!  
**–°—Ç–∞–ª–æ:** `['logs', 'model3d', 'tts', 'chat', 'workflow']` - –≤—Å–µ –ø—Ä–∞—Ü—é—î

### 4. ‚úÖ –î–æ–¥–∞–Ω–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É –∑–∞–ø–∏—Ç—ñ–≤
–¢–µ–ø–µ—Ä –≤–∏–¥–Ω–æ —Å–∫—ñ–ª—å–∫–∏ KB –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –¥–æ API –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ 413

## üìÇ –ó–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏

```
config/
‚îú‚îÄ‚îÄ global-config.js                          ‚úÖ –ó–∞–º—ñ–Ω–µ–Ω–æ –º–æ–¥–µ–ª—ñ –Ω–∞ mistral-nemo
‚îî‚îÄ‚îÄ workflow-config.js                        ‚úÖ –ó–±—ñ–ª—å—à–µ–Ω–æ timeout –¥–æ 60s

orchestrator/api/
‚îî‚îÄ‚îÄ websocket-manager.js                      ‚úÖ –î–æ–¥–∞–Ω–æ chat —Ç–∞ workflow –ø—ñ–¥–ø–∏—Å–∫–∏

orchestrator/workflow/stages/
‚îú‚îÄ‚îÄ system-stage-processor.js                 ‚úÖ Timeout 60s + –ª–æ–≥—É–≤–∞–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É
‚îî‚îÄ‚îÄ agent-stage-processor.js                  ‚úÖ Timeout 60s + –ª–æ–≥—É–≤–∞–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É
```

## üöÄ –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏

### –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ orchestrator:
```bash
npm run start
```

### –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏:
```
"–ó–Ω–∞–π–¥–∏ BYD Song Plus 2025 –Ω–∞ auto.ria, —Å—Ç–≤–æ—Ä–∏ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—é"
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ù–µ–º–∞—î –ø–æ–º–∏–ª–æ–∫ 413
- ‚úÖ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑'—è–≤–ª—è—é—Ç—å—Å—è –≤ —á–∞—Ç—ñ
- ‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –¥–æ –∫—ñ–Ω—Ü—è

## üìä –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –º–æ–¥–µ–ª–µ–π

| –ú–æ–¥–µ–ª—å | Context | Rate Limit | –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è |
|--------|---------|------------|--------------|
| `ministral-3b` | 8K | 45/min | Mode Selection, Summary |
| `mistral-small-2503` | 32K | 40/min | TODO Planning |
| `mistral-nemo` | 128K | 14/min | Plan/Verify/Adjust |

## üîß –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ —à–≤–∏–¥—à–µ (–∞–ª–µ –¥–æ—Ä–æ–∂—á–µ):

```bash
export MCP_MODEL_PLAN_TOOLS="openai/gpt-4o-mini"
export MCP_MODEL_VERIFY_ITEM="openai/gpt-4o-mini"
export MCP_MODEL_ADJUST_TODO="openai/gpt-4o-mini"
```

## üìñ –î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
–î–∏–≤–∏—Å—å: `docs/fixes/MODEL_413_CHAT_FIX_2025-10-14.md`
