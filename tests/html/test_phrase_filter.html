<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó —Ñ–æ–Ω–æ–≤–∏—Ö —Ñ—Ä–∞–∑</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        .test-section {
            background: #2a2a2a;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            border: 1px solid #444;
        }
        .phrase-test {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            font-family: monospace;
        }
        .phrase-test.background {
            background: #5a2d2d;
            color: #ff9090;
        }
        .phrase-test.command {
            background: #2d5a2d;
            color: #90ee90;
        }
        .phrase-test.uncertain {
            background: #5a5a2d;
            color: #ffff90;
        }
        .phrase-input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            background: #333;
            color: #fff;
            border: 1px solid #555;
            border-radius: 5px;
        }
        button {
            background: #0066cc;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover { background: #0088ff; }
        .result {
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 3px;
        }
        .ignored { background: #5a2d2d; color: #ff9090; }
        .accepted { background: #2d5a2d; color: #90ee90; }
        .uncertain { background: #5a5a2d; color: #ffff90; }
    </style>
</head>
<body>
    <h1>üîç –¢–µ—Å—Ç —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó —Ñ–æ–Ω–æ–≤–∏—Ö —Ñ—Ä–∞–∑ ATLAS</h1>
    
    <div class="test-section">
        <h2>1. –¢–µ—Å—Ç –≤–ª–∞—Å–Ω–æ—ó —Ñ—Ä–∞–∑–∏</h2>
        <input type="text" id="customPhrase" class="phrase-input" placeholder="–í–≤–µ–¥—ñ—Ç—å —Ñ—Ä–∞–∑—É –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è...">
        <input type="number" id="confidence" class="phrase-input" placeholder="–í–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å (0.0-1.0)" value="1.0" min="0" max="1" step="0.1">
        <button onclick="testCustomPhrase()">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ñ—Ä–∞–∑—É</button>
        <div id="customResult"></div>
    </div>

    <div class="test-section">
        <h2>2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ç–µ—Å—Ç–∏</h2>
        <button onclick="runAllTests()">–ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—Å—ñ —Ç–µ—Å—Ç–∏</button>
        <div id="testResults"></div>
    </div>

    <div class="test-section">
        <h2>3. –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑ –ª–æ–≥—ñ–≤</h2>
        <p>–§—Ä–∞–∑–∏ –∑ –≤–∞—à–∏—Ö –ª–æ–≥—ñ–≤:</p>
        <div id="logPhrases"></div>
    </div>

    <script type="module">
        import { isBackgroundPhrase, isUserCommand } from './web/static/js/voice-control/config.js';
        
        // –¢–µ—Å—Ç–æ–≤—ñ —Ñ—Ä–∞–∑–∏ –∑ –ª–æ–≥—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
        const logPhrases = [
            { text: "–î—è–∫—É—é –∑–∞ –ø–µ—Ä–µ–≥–ª—è–¥!", expected: "background" },
            { text: "–°—É–±—Ç–∏—Ç—Ä—É–≤–∞–ª—å–Ω–∏—Ü—è –û–ª—è –®–æ—Ä –î—è–∫—É—é!", expected: "background" },
            { text: "–î—è–∫—É—é.", expected: "background" },
            { text: "–ë—É–¥—å –ª–∞—Å–∫–∞!", expected: "background" },
            { text: "–°–∫–∞–∂–∏ –º–µ–Ω—ñ, –∞ —è–∫ —Ç–∏ —Å–µ–±–µ –ø–æ—á—É–≤–∞—î—à? –©–µ –¥–æ–±—Ä–µ?", expected: "command" },
            { text: "—è —Ö–æ—á—É –∑–∞–ø–∏—Ç–∞—Ç–∏ —á–∏ —Ç–∏ –≥–æ–≤–æ—Ä–∏—Ç—å –Ø —Ö–æ—á—É –∑–∞–ø–∏—Ç–∞—Ç–∏", expected: "command" },
            { text: "–¢–∏ —á–æ–≥–æ –Ω–µ –∑–∞–±—É–≤? –ß–æ–ø, –ø–∞—Ä–Ω–µ–π.", expected: "command" },
            { text: "–î–æ–±—Ä–µ, —Ü–µ —á—É–¥–æ–≤–æ.", expected: "uncertain" },
            { text: "–°–∫–∞–∂–∏ –º–µ–Ω—ñ, –∑ —á–æ–≥–æ —è –ø–æ—á–∞–≤ –¥–æ —Ç–µ–±–µ –ø–∏—Å–∞—Ç–∏?", expected: "command" },
            { text: "–¶–µ –Ω–µ –û–ª—è, —Ü–µ –ú—ñ—è, —è–∫–∞ —Å–ø—ñ–≤–∞—î", expected: "command" },
            { text: "–ù—É, –∞ —Ñ–∞–Ω—ñ —Å–ø–∏—Ä–∞—î, –Ω–µ?", expected: "command" },
            { text: "–°–ø—ñ–≤–∞—î–º–æ —è –Ω–æ–≤–∞–∑—ñ.", expected: "uncertain" },
            { text: "–°–∫–∞–∂–∏ –º–µ–Ω—ñ, –∞ —â–æ —Ç–∏ –º–∞—î—à —Ä–æ–±–∏—Ç–∏?", expected: "command" }
        ];
        
        // –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ç–µ—Å—Ç–æ–≤—ñ —Ñ—Ä–∞–∑–∏
        const additionalTests = [
            { text: "–¥—è–∫—É—é –∑–∞ —É–≤–∞–≥—É", expected: "background" },
            { text: "–ø—ñ–¥–ø–∏—Å—É–π—Ç–µ—Å—å –Ω–∞ –∫–∞–Ω–∞–ª", expected: "background" },
            { text: "—Å—Ç–∞–≤—Ç–µ –ª–∞–π–∫–∏", expected: "background" },
            { text: "—Ç–∞–∫", expected: "background" },
            { text: "–Ω—ñ", expected: "background" },
            { text: "–¥–æ–±—Ä–µ", expected: "background" },
            { text: "–æ–∫–µ–π", expected: "background" },
            { text: "–©–æ —Ç–∏ –º–æ–∂–µ—à —Ä–æ–±–∏—Ç–∏?", expected: "command" },
            { text: "–Ø–∫ —Å–ø—Ä–∞–≤–∏?", expected: "command" },
            { text: "–°—Ç–≤–æ—Ä–∏ –Ω–æ–≤–∏–π —Ñ–∞–π–ª", expected: "command" },
            { text: "–î–æ–ø–æ–º–æ–∂–∏ –º–µ–Ω—ñ –∑ –∫–æ–¥–æ–º", expected: "command" },
            { text: "–ü–æ—è—Å–Ω–∏ —â–æ —Ç–∞–∫–µ JavaScript", expected: "command" },
            { text: "—Ö–º", expected: "background" },
            { text: "–∞–≥–∞", expected: "background" },
            { text: "—É–≥—É", expected: "background" }
        ];
        
        window.testCustomPhrase = function() {
            const phrase = document.getElementById('customPhrase').value;
            const confidence = parseFloat(document.getElementById('confidence').value) || 1.0;
            
            if (!phrase.trim()) {
                alert('–í–≤–µ–¥—ñ—Ç—å —Ñ—Ä–∞–∑—É –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è');
                return;
            }
            
            const isBackground = isBackgroundPhrase(phrase);
            const isCommand = isUserCommand(phrase, confidence);
            
            let result, className;
            if (isBackground) {
                result = "üö´ –Ü–ì–ù–û–†–£–Ñ–¢–¨–°–Ø (—Ñ–æ–Ω–æ–≤–∞ —Ñ—Ä–∞–∑–∞)";
                className = "ignored";
            } else if (isCommand) {
                result = "‚úÖ –ü–†–ò–ô–ú–ê–Ñ–¢–¨–°–Ø (–∫–æ–º–∞–Ω–¥–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞)";
                className = "accepted";
            } else {
                result = "ü§î –Ü–ì–ù–û–†–£–Ñ–¢–¨–°–Ø (–Ω–∏–∑—å–∫–∞ –≤–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å)";
                className = "uncertain";
            }
            
            document.getElementById('customResult').innerHTML = 
                `<div class="result ${className}">${result}</div>
                 <p>–§—Ä–∞–∑–∞: "${phrase}"</p>
                 <p>–í–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å: ${confidence}</p>
                 <p>–§–æ–Ω–æ–≤–∞: ${isBackground ? '–¢–∞–∫' : '–ù—ñ'}</p>
                 <p>–ö–æ–º–∞–Ω–¥–∞: ${isCommand ? '–¢–∞–∫' : '–ù—ñ'}</p>`;
        };
        
        window.runAllTests = function() {
            const allTests = [...logPhrases, ...additionalTests];
            let results = '<h3>–†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:</h3>';
            let correct = 0;
            let total = allTests.length;
            
            allTests.forEach((test, index) => {
                const isBackground = isBackgroundPhrase(test.text);
                const isCommand = isUserCommand(test.text, 1.0);
                
                let actual;
                if (isBackground) {
                    actual = "background";
                } else if (isCommand) {
                    actual = "command";
                } else {
                    actual = "uncertain";
                }
                
                const isCorrect = actual === test.expected;
                if (isCorrect) correct++;
                
                const className = isCorrect ? 'accepted' : 'ignored';
                results += `
                    <div class="phrase-test ${className}">
                        <span>"${test.text}"</span>
                        <span>–û—á—ñ–∫—É–≤–∞–Ω–æ: ${test.expected} | –û—Ç—Ä–∏–º–∞–Ω–æ: ${actual}</span>
                    </div>
                `;
            });
            
            results = `<div class="result ${correct === total ? 'accepted' : 'uncertain'}">
                         –ü—Ä–∞–≤–∏–ª—å–Ω–æ: ${correct}/${total} (${Math.round(correct/total*100)}%)
                       </div>` + results;
            
            document.getElementById('testResults').innerHTML = results;
        };
        
        // –ü–æ–∫–∞–∑—É—î–º–æ —Ñ—Ä–∞–∑–∏ –∑ –ª–æ–≥—ñ–≤
        function displayLogPhrases() {
            let html = '';
            logPhrases.forEach(phrase => {
                const isBackground = isBackgroundPhrase(phrase.text);
                const isCommand = isUserCommand(phrase.text, 1.0);
                
                let className, status;
                if (isBackground) {
                    className = 'background';
                    status = 'üö´ –§–æ–Ω–æ–≤–∞';
                } else if (isCommand) {
                    className = 'command';
                    status = '‚úÖ –ö–æ–º–∞–Ω–¥–∞';
                } else {
                    className = 'uncertain';
                    status = 'ü§î –ù–µ–≤–∏–∑–Ω–∞—á–µ–Ω–∞';
                }
                
                html += `
                    <div class="phrase-test ${className}">
                        <span>"${phrase.text}"</span>
                        <span>${status}</span>
                    </div>
                `;
            });
            
            document.getElementById('logPhrases').innerHTML = html;
        }
        
        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
        window.addEventListener('load', () => {
            displayLogPhrases();
            console.log('üîç –¢–µ—Å—Ç —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó —Ñ—Ä–∞–∑ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ');
        });
        
        // –ì–ª–æ–±–∞–ª—å–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –¥–æ—Å—Ç—É–ø—É –∑ –∫–æ–Ω—Å–æ–ª—ñ
        window.isBackgroundPhrase = isBackgroundPhrase;
        window.isUserCommand = isUserCommand;
        
    </script>
</body>
</html>
