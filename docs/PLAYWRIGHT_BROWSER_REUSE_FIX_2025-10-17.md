# Playwright Browser Reuse Optimization (FIXED 17.10.2025)

## –ü—Ä–æ–±–ª–µ–º–∞
–ö–æ–∂–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ Playwright –∑–∞–ø—É—Å–∫–∞–ª–∞ –ù–û–í–ò–ô –µ–∫–∑–µ–º–ø–ª—è—Ä Chromium, —â–æ –ø—Ä–∏–∑–≤–æ–¥–∏–ª–æ –¥–æ:
- ‚ùå –ú–Ω–æ–∂–∏–Ω–Ω–∏—Ö –∑–∞–ø—É—Å–∫—ñ–≤ –±—Ä–∞—É–∑–µ—Ä–∞ (–ø–æ 1 –Ω–∞ –∫–æ–∂–Ω—É –∫–æ–º–∞–Ω–¥—É)
- ‚ùå –í–µ–ª–∏–∫–æ–≥–æ —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ —Ç–∞ —á–∞—Å—É
- ‚ùå –ü–æ–≤—ñ–ª—å–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω—å –∑ –±–∞–≥–∞—Ç—å–º–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏

## –°–∏–º–ø—Ç–æ–º
```
# –ó–∞–º—ñ—Å—Ç—å 1 –±—Ä–∞—É–∑–µ—Ä–∞ –∑ 5 –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏:
–î—ñ—è 1: playwright_browser_open ‚Üí –∑–∞–ø—É—Å–∫–∞—î Chromium #1
–î—ñ—è 2: playwright_navigate ‚Üí –∑–∞–ø—É—Å–∫–∞—î Chromium #2 ‚ùå
–î—ñ—è 3: playwright_fill ‚Üí –∑–∞–ø—É—Å–∫–∞—î Chromium #3 ‚ùå
–î—ñ—è 4: playwright_click ‚Üí –∑–∞–ø—É—Å–∫–∞—î Chromium #4 ‚ùå
–î—ñ—è 5: playwright_screenshot ‚Üí –∑–∞–ø—É—Å–∫–∞—î Chromium #5 ‚ùå
```

## –ö–æ—Ä—ñ–Ω—å –ø—Ä–æ–±–ª–µ–º–∏
–¢–µ—Ç—è–Ω–∞ (LLM) –ù–ï –∑–Ω–∞–ª–∞ –ø—Ä–æ –ø–∞—Ä–∞–º–µ—Ç—Ä `browser_id` —ñ –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É –≤–∏–∫–ª–∏–∫–∞–ª–∞ `playwright_browser_open` –∑–∞–º—ñ—Å—Ç—å –ø–µ—Ä–µ–≤–∞–∂—É —ñ—Å–Ω—É—é—á–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞.

## –†—ñ—à–µ–Ω–Ω—è
–î–æ–¥–∞–Ω–æ —è–≤–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –≤ `prompts/mcp/tetyana_plan_tools_optimized.js`:

### 1. –°–µ–∫—Ü—ñ—è "–ü–ï–†–ï–í–ê–ñ–ê–ô –ë–†–ê–£–ó–ï–†"
```
## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û - –ü–ï–†–ï–í–ê–ñ–ê–ô –ë–†–ê–£–ó–ï–† –î–õ–Ø –ö–û–ñ–ù–û–á –ö–û–ú–ê–ù–î–ò

üöÄ **–û–ü–¢–ò–ú–Ü–ó–ê–¶–Ü–Ø - –£–Ω–∏–∫–Ω–∏ –º–Ω–æ–∂–∏–Ω–Ω–∏—Ö –∑–∞–ø—É—Å–∫—ñ–≤ Chromium:**

–†—ñ—à–µ–Ω–Ω—è: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π browser_id –≤—ñ–¥ –ø–µ—Ä—à–æ—ó –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è –≤—Å—ñ—Ö –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö:

–ü–µ—Ä—à–∏–π –∑–∞–ø—É—Å–∫ (–≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –±—Ä–∞—É–∑–µ—Ä–∞):
- playwright_browser_open ‚Üí –ø–æ–≤–µ—Ä—Ç–∞—î browser_id: "12345"
- –ó–ê–ü–ê–ú'–Ø–¢–ê–ô —Ü–µ–π ID!

–ù–∞—Å—Ç—É–ø–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ (–ü–ï–†–ï–í–ê–ñ–ê–ô –±—Ä–∞—É–∑–µ—Ä):
- –í—Å—ñ —ñ–Ω—à—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó (navigate, click, fill, screenshot) –ø–æ–≤–∏–Ω–Ω—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä browser_id
- ‚úÖ {"server": "playwright", "tool": "playwright_navigate", "parameters": {"browser_id": "12345", "url": "..."}}
- ‚ùå –ù–ï –†–û–ë–ò {"server": "playwright", "tool": "playwright_browser_open"} - —Ü–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ù–û–í–ò–ô –±—Ä–∞—É–∑–µ—Ä!
```

### 2. –ù–∞–≥–æ–ª–æ—à–µ–Ω–Ω—è —É –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö
–î–æ–¥–∞–Ω–æ `browser_id` –¥–æ –æ–ø–∏—Å—ñ–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤:
- playwright_fill: browser_id (optional)
- playwright_click: browser_id (optional)
- playwright_navigate: browser_id (optional)
- playwright_get_visible_text: browser_id (optional)

### 3. –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ (–ü—Ä–∏–∫–ª–∞–¥ 7)
–î–æ–¥–∞–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ —è–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ browser_id –∑ —Ç—Ä—å–æ–º–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∏–º–∏ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏:

```javascript
–î—ñ—è 1 - –í—ñ–¥–∫—Ä–∏—Ç—Ç—è –±—Ä–∞—É–∑–µ—Ä–∞:
{"server": "playwright", "tool": "playwright_browser_open", ...}

–î—ñ—è 2 - –ù–∞–≤—ñ–≥–∞—Ü—ñ—è (–ü–ï–†–ï–í–ê–ñ–ê–ô –±—Ä–∞—É–∑–µ—Ä):
{"server": "playwright", "tool": "playwright_navigate", 
 "parameters": {"browser_id": "12345", "url": "https://www.google.com"}}

–î—ñ—è 3 - –ó–∞–ø–æ–≤–Ω–µ–Ω–Ω—è (–ü–ï–†–ï–í–ê–ñ–ê–ô –±—Ä–∞—É–∑–µ—Ä):
{"server": "playwright", "tool": "playwright_fill",
 "parameters": {"browser_id": "12345", "selector": "[name=\"q\"]", "value": "Python"}}
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ (–æ—á—ñ–∫—É–≤–∞–Ω–∞):
```
–î—ñ—è 1: playwright_browser_open ‚Üí –∑–∞–ø—É—Å–∫–∞—î Chromium #1
–î—ñ—è 2: playwright_navigate (browser_id: "12345") ‚Üí –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Chromium #1
–î—ñ—è 3: playwright_fill (browser_id: "12345") ‚Üí –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Chromium #1
–î—ñ—è 4: playwright_click (browser_id: "12345") ‚Üí –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Chromium #1
–î—ñ—è 5: playwright_screenshot (browser_id: "12345") ‚Üí –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Chromium #1
```

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- üöÄ –®–≤–∏–¥–∫—ñ—Å—Ç—å: ~5x –ø—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è (1 –±—Ä–∞—É–∑–µ—Ä vs 5 –±—Ä–∞—É–∑–µ—Ä—ñ–≤)
- üíæ –ü–∞–º'—è—Ç—å: ~5x –º–µ–Ω—à–µ RAM (1 Chromium process vs 5)
- ‚è±Ô∏è –ß–∞—Å: –ó–º–µ–Ω—à–µ–Ω–Ω—è —á–∞—Å—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è
- üéØ –ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å: –ú–µ–Ω—à–µ race conditions —Ç–∞ –ø–æ–º–∏–ª–æ–∫

## –í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ —Ñ–∞–π–ª–∏
- `prompts/mcp/tetyana_plan_tools_optimized.js` (+70 LOC):
  - –ù–æ–≤–∞ —Å–µ–∫—Ü—ñ—è "–ü–ï–†–ï–í–ê–ñ–ê–ô –ë–†–ê–£–ó–ï–†"
  - –ü—Ä–∏–∫–ª–∞–¥ 7 –∑ browser_id
  - –û–Ω–æ–≤–ª–µ–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –¥–ª—è –≤—Å—ñ—Ö playwright tools

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
node -c prompts/mcp/tetyana_plan_tools_optimized.js

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó —î –≤ —Ñ–∞–π–ª—ñ
grep -A 5 "browser_id" prompts/mcp/tetyana_plan_tools_optimized.js
```

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
1. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è –∑ –º–Ω–æ–∂–∏–Ω–Ω–∏–º–∏ Playwright –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏
2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å–∏—Å—Ç–µ–º–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä - –º–∞—î –±—É—Ç–∏ –¢–Ü–õ–¨–ö–ò 1 Chromium –ø—Ä–æ—Ü–µ—Å
3. –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è: —Ä–∞–Ω—ñ—à–µ vs —Ç–µ–ø–µ—Ä (–ø–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏ ~5x —à–≤–∏–¥—à–µ)

## –ö—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞
- ‚úÖ –ó–ê–í–ñ–î–ò –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π browser_id –¥–ª—è –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π
- ‚úÖ browser_id –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –ø–µ—Ä–µ–¥–∞–Ω –∑ response –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó –¥—ñ—ó
- ‚ùå –ù–ï –∑–∞–ø—É—Å–∫–∞–π –Ω–æ–≤–∏–π –±—Ä–∞—É–∑–µ—Ä —è–∫—â–æ –≤—ñ–Ω —É–∂–µ –æ—Ç–≤–æ—Ä–µ–Ω–∏–π
- ‚ùå –ù–ï —ñ–≥–Ω–æ—Ä—É–π browser_id –ø–∞—Ä–∞–º–µ—Ç—Ä

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ñ –ø—ñ–¥—Ö–æ–¥–∏ (—è–∫—â–æ —Ü–µ –Ω–µ —Å–ø—Ä–∞—Ü—é—î)
1. **Browser Pooling** - MCP server –º–æ–∂–µ –∫–µ—à—É–≤–∞—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∏ (—è–∫—â–æ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è)
2. **Persistent Mode** - –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –±—Ä–∞—É–∑–µ—Ä –æ–¥–∏–Ω —Ä–∞–∑ —ñ –∫–æ–Ω–Ω–µ–∫—Ç–∏—Ç–∏—Å—å –¥–æ –Ω—å–æ–≥–æ –ø–æ—Å—Ç—ñ–π–Ω–æ
3. **Browser Context API** - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ context –∑–∞–º—ñ—Å—Ç—å browser –¥–ª—è —ñ–∑–æ–ª—è—Ü—ñ—ó

---

**–î–∞—Ç–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** 17 –∂–æ–≤—Ç–Ω—è 2025  
**–í–µ—Ä—Å—ñ—è:** v5.0 Pure MCP Edition  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–û
