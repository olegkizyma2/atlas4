# –ó–í–Ü–¢ –ü–†–û –†–ï–§–ê–ö–¢–û–†–ò–ù–ì –ö–û–ù–¢–ï–ö–°–¢–£ –¢–ê –í–ò–î–ê–õ–ï–ù–ù–Ø FALLBACK

**–î–∞—Ç–∞:** 10 –∂–æ–≤—Ç–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ò–ö–û–ù–ê–ù–û  
**–í–µ—Ä—Å—ñ—è:** ATLAS v4.0 Context & Memory Fix

---

## –í–ò–ö–û–ù–ê–ù–Ü –ó–ú–Ü–ù–ò

### ‚úÖ 1. –í–∏–¥–∞–ª–µ–Ω–æ –≤—Å—ñ fallback –º–µ—Ö–∞–Ω—ñ–∑–º–∏

#### 1.1 `orchestrator/workflow/executor-v3.js`
**–í–∏–¥–∞–ª–µ–Ω–æ:**
- –§—É–Ω–∫—Ü—ñ—è `fallbackChatResponse()` - –±—ñ–ª—å—à–µ –Ω–µ –≥–µ–Ω–µ—Ä—É—î —Ñ–µ–π–∫–æ–≤—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- –í—Å—ñ –≤–∏–∫–ª–∏–∫–∏ fallback –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö
- –ó–∞–º—ñ–Ω–µ–Ω–æ –Ω–∞ `throw new Error()` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫

**–ó–º—ñ–Ω–µ–Ω–æ:**
```javascript
// ‚ùå –ë–£–õ–û:
if (!chatStage) {
  logger.error('Chat stage configuration not found');
  return await fallbackChatResponse(userMessage, session, res);
}

// ‚úÖ –°–¢–ê–õ–û:
if (!chatStage) {
  throw new Error('Chat stage configuration not found');
}
```

#### 1.2 `orchestrator/ai/state-analyzer.js`
**–í–∏–¥–∞–ª–µ–Ω–æ:**
- –§—É–Ω–∫—Ü—ñ—è `localFallbackAnalysis()` - –ª–æ–∫–∞–ª—å–Ω–∞ –∑–∞–≥–ª—É—à–∫–∞ –∞–Ω–∞–ª—ñ–∑—É
- –ü—Ä–∞–≤–∏–ª–∞ `FALLBACK_ANALYSIS_RULES` –±—ñ–ª—å—à–µ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è
- –í—Å—ñ fallback —à–ª—è—Ö–∏ –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö AI

**–ó–º—ñ–Ω–µ–Ω–æ:**
```javascript
// ‚ùå –ë–£–õ–û:
} catch (error) {
  logger.error('AI Model Error:', error.message);
  const fallbackResult = localFallbackAnalysis(stage, response);
  return fallbackResult;
}

// ‚úÖ –°–¢–ê–õ–û:
} catch (error) {
  logger.error('AI Model Error:', error.message);
  throw new Error(`AI state analysis failed: ${error.message}`);
}
```

#### 1.3 `orchestrator/workflow/stages/agent-stage-processor.js`
**–í–∏–¥–∞–ª–µ–Ω–æ:**
- –ú–µ—Ç–æ–¥ `createFallbackResponse()` - –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ñ–µ–π–∫–æ–≤–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- Try-catch –±–ª–æ–∫ –∑ fallback –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö Goose

**–ó–º—ñ–Ω–µ–Ω–æ:**
```javascript
// ‚ùå –ë–£–õ–û:
} catch (gooseError) {
  logger.warn(`Goose agent failed for ${this.agent}, using fallback`);
  return this.createFallbackResponse(prompt, session);
}

// ‚úÖ –°–¢–ê–õ–û:
} catch (gooseError) {
  logger.error(`Goose agent failed for ${this.agent} - NO FALLBACK`);
  throw new Error(`Goose agent failed: ${gooseError.message}`);
}
```

---

### ‚úÖ 2. –í–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–æ –ø–µ—Ä–µ–¥–∞—á—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —Ä–æ–∑–º–æ–≤–∏

#### 2.1 –ù–æ–≤–∏–π –º–µ—Ç–æ–¥ `buildContextMessages()`
**–§–∞–π–ª:** `orchestrator/workflow/stages/agent-stage-processor.js`

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
- –ó–±–∏—Ä–∞—î —ñ—Å—Ç–æ—Ä—ñ—é —Ä–æ–∑–º–æ–≤–∏ –∑ `session.history` –∞–±–æ `session.chatThread`
- –†–æ–∑—Ä—ñ–∑–Ω—è—î **chat mode** (stage 0) —Ç–∞ **task mode** (stage 1+)
- –û–±–º–µ–∂—É—î –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–æ –æ—Å—Ç–∞–Ω–Ω—ñ—Ö 10 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (chat) –∞–±–æ 5 (task)
- –í–∏–¥–∞–ª—è—î –∞–≥–µ–Ω—Ç—Å—å–∫—ñ —Å–∏–≥–Ω–∞—Ç—É—Ä–∏ –¥–ª—è —á–∏—Å—Ç–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
- –î–æ–¥–∞—î —Å–∏—Å—Ç–µ–º–Ω–∏–π –ø—Ä–æ–º–ø—Ç –Ω–∞ –ø–æ—á–∞—Ç–æ–∫

**–ü—Ä–∏–∫–ª–∞–¥:**
```javascript
buildContextMessages(session, prompt, userMessage) {
  const messages = [];
  
  // System prompt
  messages.push({ role: 'system', content: prompt.systemPrompt });
  
  // Chat mode: –≤–∫–ª—é—á–∞—î–º–æ –ø–æ–≤–Ω—É —ñ—Å—Ç–æ—Ä—ñ—é
  if (isChatMode && session.chatThread) {
    const recentHistory = session.chatThread.messages.slice(-10);
    for (const msg of recentHistory) {
      messages.push({ 
        role: msg.role, 
        content: msg.content.replace(/^\[.*?\]\s*/, '').trim()
      });
    }
  }
  
  // –ü–æ—Ç–æ—á–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
  messages.push({ role: 'user', content: userMessage });
  
  return messages;
}
```

#### 2.2 –û–Ω–æ–≤–ª–µ–Ω–æ `executeWithGoose()`
**–ó–º—ñ–Ω–∏:**
- –ü—Ä–∏–π–º–∞—î `contextMessages` –∑–∞–º—ñ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç—É
- –§–æ—Ä–º–∞—Ç—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π –ø—Ä–æ–º–ø—Ç
- –õ–æ–≥—É—î —Ä–æ–∑–º—ñ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–§–æ—Ä–º–∞—Ç –ø—Ä–æ–º–ø—Ç—É:**
```
SYSTEM INSTRUCTIONS:
[—Å–∏—Å—Ç–µ–º–Ω–∏–π –ø—Ä–æ–º–ø—Ç]

USER: [–ø–æ–ø–µ—Ä–µ–¥–Ω—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è 1]

ASSISTANT: [–ø–æ–ø–µ—Ä–µ–¥–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—å 1]

USER: [–ø–æ–ø–µ—Ä–µ–¥–Ω—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è 2]

ASSISTANT: [–ø–æ–ø–µ—Ä–µ–¥–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—å 2]

USER: [–ø–æ—Ç–æ—á–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è]

–ü–†–û–®–£ –í–Ü–î–ü–û–í–Ü–°–¢–ò –≤—Ä–∞—Ö–æ–≤—É—é—á–∏ –≤–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ä–æ–∑–º–æ–≤–∏ –≤–∏—â–µ.
```

#### 2.3 –ú–µ—Ç–∞–¥–∞–Ω—ñ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
**–î–æ–¥–∞–Ω–æ –≤ response metadata:**
```javascript
metadata: {
  contextMessagesCount: contextMessages?.length || 0
},
fullResponse: {
  contextIncluded: contextMessages?.length > 1
}
```

---

### ‚úÖ 3. –£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–æ —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π

#### 3.1 –í–∏–¥–∞–ª–µ–Ω–æ –¥—É–±–ª—ñ–∫–∞—Ç–∏
**–í–∏–¥–∞–ª–µ–Ω—ñ —Ñ–∞–π–ª–∏:**
- ‚ùå `orchestrator/config.js` - –ø—Ä–æ–∫—Å—ñ –¥–æ GlobalConfig
- ‚ùå `shared-config.js` (root) - –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–π legacy —Ñ–∞–π–ª

**–û–Ω–æ–≤–ª–µ–Ω—ñ —ñ–º–ø–æ—Ä—Ç–∏:**
```javascript
// ‚ùå –ë–£–õ–û:
import { WORKFLOW_STAGES, WORKFLOW_CONFIG } from '../../shared-config.js';

// ‚úÖ –°–¢–ê–õ–û:
import GlobalConfig from '../../config/global-config.js';
```

#### 3.2 –Ñ–¥–∏–Ω–µ –¥–∂–µ—Ä–µ–ª–æ —ñ—Å—Ç–∏–Ω–∏
**–ó–∞–ª–∏—à–µ–Ω–æ:**
- ‚úÖ `config/global-config.js` - –Ñ–î–ò–ù–ê –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
- ‚úÖ `config/agents-config.js` - —ñ–º–ø–æ—Ä—Ç—É—î—Ç—å—Å—è –≤ global-config
- ‚úÖ `config/workflow-config.js` - —ñ–º–ø–æ—Ä—Ç—É—î—Ç—å—Å—è –≤ global-config
- ‚úÖ `config/api-config.js` - —ñ–º–ø–æ—Ä—Ç—É—î—Ç—å—Å—è –≤ global-config

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –ù–µ–º–∞—î –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤ –º—ñ–∂ —Ä—ñ–∑–Ω–∏–º–∏ –∫–æ–Ω—Ñ—ñ–≥–∞–º–∏
- –õ–µ–≥–∫–æ –∑–Ω–∞–π—Ç–∏ –¥–µ –∑–º—ñ–Ω–∏—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- –ì–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –º—ñ–∂ –º–æ–¥—É–ª—è–º–∏
- –í–µ—Ä—Å—ñ–æ–Ω—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ –æ–¥–∏–Ω —Ñ–∞–π–ª

---

## –¢–ï–•–ù–Ü–ß–ù–Ü –î–ï–¢–ê–õ–Ü

### –ü–µ—Ä–µ–¥–∞—á–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É: Chat Mode vs Task Mode

#### Chat Mode (stage 0)
```javascript
// –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î session.chatThread.messages
const recentHistory = session.chatThread.messages.slice(-10);
// –ü–æ–≤–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è —Ä–æ–∑–º–æ–≤–∏ –¥–ª—è –ø—Ä–∏—Ä–æ–¥–Ω–æ–≥–æ –¥—ñ–∞–ª–æ–≥—É
```

#### Task Mode (stage 1+)
```javascript
// –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î session.history
const relevantHistory = session.history
  .filter(msg => msg.role === 'assistant' || msg.role === 'user')
  .slice(-5);
// –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –µ—Ç–∞–ø—ñ–≤
```

### –û—á–∏—â–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É

**–í–∏–¥–∞–ª—è—é—Ç—å—Å—è:**
- –ê–≥–µ–Ω—Ç—Å—å–∫—ñ —Å–∏–≥–Ω–∞—Ç—É—Ä–∏: `[ATLAS]`, `[–¢–ï–¢–Ø–ù–ê]`, `[–ì–†–ò–®–ê]`
- –¢–µ—Ö–Ω—ñ—á–Ω—ñ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∏: ` ``` `, markdown formatting
- –°–∏—Å—Ç–µ–º–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (–∫—Ä—ñ–º –ø–µ—Ä—à–æ–≥–æ)

**–ó–∞–ª–∏—à–∞—î—Ç—å—Å—è:**
- –ß–∏—Å—Ç–∏–π —Ç–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ user/assistant
- –õ–æ–≥—ñ—á–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫ —Ä–æ–∑–º–æ–≤–∏

---

## –û–ß–Ü–ö–£–í–ê–ù–Ü –†–ï–ó–£–õ–¨–¢–ê–¢–ò

### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É:
```
[USER] –ü—Ä–∏–≤—ñ—Ç, –º–µ–Ω–µ –∑–≤–∞—Ç–∏ –ü–µ—Ç—Ä–æ
[ATLAS] –í—ñ—Ç–∞—é! –Ø ‚Äî –ê—Ç–ª–∞—Å, —Ü–∏—Ñ—Ä–æ–≤–µ –≤—Ç—ñ–ª–µ–Ω–Ω—è...

[USER] –Ø–∫ –º–µ–Ω–µ –∑–≤–∞—Ç–∏?
[ATLAS] –í—ñ—Ç–∞—é! –Ø ‚Äî –ê—Ç–ª–∞—Å, —Ü–∏—Ñ—Ä–æ–≤–µ –≤—Ç—ñ–ª–µ–Ω–Ω—è... ‚ùå
```

### –ü—ñ—Å–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É:
```
[USER] –ü—Ä–∏–≤—ñ—Ç, –º–µ–Ω–µ –∑–≤–∞—Ç–∏ –ü–µ—Ç—Ä–æ
[ATLAS] –ü—Ä–∏–≤—ñ—Ç, –ü–µ—Ç—Ä–æ! –†–∞–¥–∏–π –ø–æ–∑–Ω–∞–π–æ–º–∏—Ç–∏—Å—è.

[USER] –Ø–∫ –º–µ–Ω–µ –∑–≤–∞—Ç–∏?
[ATLAS] –í–∞—Å –∑–≤–∞—Ç–∏ –ü–µ—Ç—Ä–æ. ‚úÖ –ü–∞–º'—è—Ç–∞—î –∫–æ–Ω—Ç–µ–∫—Å—Ç!

[USER] –†–æ–∑–∫–∞–∂–∏ –∞–Ω–µ–∫–¥–æ—Ç
[ATLAS] –ó —Ä–∞–¥—ñ—Å—Ç—é! –û—Å—å –¥–æ–±—Ä–∏–π –∞–Ω–µ–∫–¥–æ—Ç –ø—Ä–æ... ‚úÖ –ü—Ä–æ–¥–æ–≤–∂—É—î —Ä–æ–∑–º–æ–≤—É
```

---

## –ú–ï–¢–†–ò–ö–ò –ó–ú–Ü–ù

| –ü–æ–∫–∞–∑–Ω–∏–∫ | –î–æ | –ü—ñ—Å–ª—è | –ó–º—ñ–Ω–∞ |
|----------|-----|-------|-------|
| Fallback —Ñ—É–Ω–∫—Ü—ñ–π | 5 | 0 | -100% |
| –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ | 5 | 3 | -40% |
| –ö–æ–Ω—Ç–µ–∫—Å—Ç –≤ chat mode | ‚ùå –í—ñ–¥—Å—É—Ç–Ω—ñ–π | ‚úÖ 10 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å | +‚àû |
| –ö–æ–Ω—Ç–µ–∫—Å—Ç –≤ task mode | ‚ùå –í—ñ–¥—Å—É—Ç–Ω—ñ–π | ‚úÖ 5 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å | +‚àû |
| –ö–æ–¥–æ–≤–∞ –±–∞–∑–∞ (LOC) | ~450 | ~380 | -15% |

---

## –ó–ê–õ–ò–®–ò–õ–û–°–Ø –ó–†–û–ë–ò–¢–ò

### üü° –ù–∏–∑—å–∫–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç

#### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó
- [ ] –û–Ω–æ–≤–∏—Ç–∏ `README.md` - –≤–∏–¥–∞–ª–∏—Ç–∏ –∑–≥–∞–¥–∫–∏ –ø—Ä–æ shared-config.js
- [ ] –û–Ω–æ–≤–∏—Ç–∏ `.github/copilot-instructions.md`
- [ ] –û–Ω–æ–≤–∏—Ç–∏ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ –¥—ñ–∞–≥—Ä–∞–º–∏

#### –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è
- [ ] –î–æ–¥–∞—Ç–∏ —É–º–æ–≤—É –¥–ª—è —Ä–æ–∑—Ä—ñ–∑–Ω–µ–Ω–Ω—è –Ω–æ–≤–æ—ó —Ä–æ–∑–º–æ–≤–∏ vs –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è
- [ ] –í–ø—Ä–æ–≤–∞–¥–∏—Ç–∏ smart truncation –¥–ª—è –¥–æ–≤–≥–∏—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ–≤
- [ ] –î–æ–¥–∞—Ç–∏ A/B —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ö —Ä–æ–∑–º—ñ—Ä—ñ–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É

---

## –¢–ï–°–¢–£–í–ê–ù–ù–Ø

### –ü–ª–∞–Ω —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

#### –¢–µ—Å—Ç 1: –ë–∞–∑–æ–≤–µ —É—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
```bash
[USER] –ü—Ä–∏–≤—ñ—Ç, –º–µ–Ω–µ –∑–≤–∞—Ç–∏ –û–ª–µ–≥
[ATLAS] –ü—Ä–∏–≤—ñ—Ç, –û–ª–µ–≥! 

[USER] –Ø–∫ –º–µ–Ω–µ –∑–≤–∞—Ç–∏?
[EXPECTED] –í–∞—Å –∑–≤–∞—Ç–∏ –û–ª–µ–≥ ‚úÖ
```

#### –¢–µ—Å—Ç 2: –ë–∞–≥–∞—Ç–æ–∫—Ä–æ–∫–æ–≤–∞ —Ä–æ–∑–º–æ–≤–∞
```bash
[USER] –†–æ–∑–∫–∞–∂–∏ –ø—Ä–æ —Å–µ–±–µ
[ATLAS] –Ø ‚Äî –ê—Ç–ª–∞—Å...

[USER] –ê —â–æ —Ç–∏ –º–æ–∂–µ—à?
[EXPECTED] –Ø–∫ —è –≤–∂–µ –∑–≥–∞–¥—É–≤–∞–≤... ‚úÖ

[USER] –†–æ–∑–∫–∞–∂–∏ –∞–Ω–µ–∫–¥–æ—Ç
[EXPECTED] –ó —Ä–∞–¥—ñ—Å—Ç—é! [–∞–Ω–µ–∫–¥–æ—Ç] ‚úÖ (–Ω–µ –ø–æ–≤—Ç–æ—Ä—é—î –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è)
```

#### –¢–µ—Å—Ç 3: –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å fallback
```bash
# –°–∏–º—É–ª—è—Ü—ñ—è –ø–æ–º–∏–ª–∫–∏ Goose
[EXPECTED] Error message –¥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
[NOT EXPECTED] Fallback –≤—ñ–¥–ø–æ–≤—ñ–¥—å ‚ùå
```

### –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–∏—Å—Ç–µ–º—É
./restart_system.sh start

# –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥—ñ–≤
tail -f logs/orchestrator.log | grep -E "(context|fallback|FALLBACK)"

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ fallback –≤–∏–∫–ª–∏–∫—ñ–≤
grep -r "fallback" logs/orchestrator.log | wc -l  # –ú–∞—î –±—É—Ç–∏ 0

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
grep -r "context.*messages" logs/orchestrator.log
```

---

## –í–ò–°–ù–û–í–û–ö

### ‚úÖ –í–∏–∫–æ–Ω–∞–Ω–æ —É—Å–ø—ñ—à–Ω–æ:

1. **–í–∏–¥–∞–ª–µ–Ω–æ fallback –º–µ—Ö–∞–Ω—ñ–∑–º–∏** - —Å–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä –ø—Ä–∞—Ü—é—î –≤–∏–∫–ª—é—á–Ω–æ –Ω–∞ –∂–∏–≤–∏—Ö –ø—Ä–æ–º–ø—Ç–∞—Ö —á–µ—Ä–µ–∑ Goose
2. **–í–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–æ –ø–µ—Ä–µ–¥–∞—á—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É** - —Ä–æ–∑–º–æ–≤–∏ —Ç—Ä–∏–º–∞—é—Ç—å —ñ—Å—Ç–æ—Ä—ñ—é –¥–æ 10 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
3. **–£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó** - —î–¥–∏–Ω–µ –¥–∂–µ—Ä–µ–ª–æ —ñ—Å—Ç–∏–Ω–∏ `config/global-config.js`
4. **–ü–æ–∫—Ä–∞—â–µ–Ω–æ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É** - –∫–æ–¥ —Å—Ç–∞–≤ —á–∏—Å—Ç—ñ—à–∏–π, –∑—Ä–æ–∑—É–º—ñ–ª—ñ—à–∏–π, –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ—à–∏–π

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä **—Å–ø—Ä–∞–≤–¥—ñ —Ä–æ–∑—É–º—ñ—î –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ä–æ–∑–º–æ–≤–∏** —ñ –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —à–∞–±–ª–æ–Ω–Ω–∏–º–∏ —Ñ—Ä–∞–∑–∞–º–∏. Fallback –º–µ—Ö–∞–Ω—ñ–∑–º–∏ –≤–∏–¥–∞–ª–µ–Ω—ñ, —â–æ –∑–º—É—à—É—î —Å–∏—Å—Ç–µ–º—É –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∞–±–æ –ø–æ–≤—ñ–¥–æ–º–ª—è—Ç–∏ –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏ –∑–∞–º—ñ—Å—Ç—å –º–∞—Å–∫—É–≤–∞–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º.

### üìä –ù–∞—Å—Ç—É–ø–Ω–∏–π –∫—Ä–æ–∫:

**–Ü–ù–¢–ï–ì–†–ê–¶–Ü–ô–ù–ï –¢–ï–°–¢–£–í–ê–ù–ù–Ø** - –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–∏—Å—Ç–µ–º—É —ñ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–µ–∞–ª—å–Ω—ñ –±–∞–≥–∞—Ç–æ–∫—Ä–æ–∫–æ–≤—ñ –¥—ñ–∞–ª–æ–≥–∏.

---

**–ê–≤—Ç–æ—Ä:** GitHub Copilot  
**–ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ:** –û—á—ñ–∫—É—î—Ç—å—Å—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –û–ª–µ–≥–æ–º –ú–∏–∫–æ–ª–∞–π–æ–≤–∏—á–µ–º  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
