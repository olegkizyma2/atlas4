# –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º–∏ –º—ñ–∫—Ä–æ—Ñ–æ–Ω—É ATLAS
**–î–∞—Ç–∞:** 11 –∂–æ–≤—Ç–Ω—è 2025, 20:30  
**–í–µ—Ä—Å—ñ—è:** 4.0

---

## üéØ –ú–µ—Ç–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É

–í–∏–ø—Ä–∞–≤–∏—Ç–∏ —Ä–æ–±–æ—Ç—É –¥–≤–æ—Ö —Ä–µ–∂–∏–º—ñ–≤ –º—ñ–∫—Ä–æ—Ñ–æ–Ω—É —Ç–∞ –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—É —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é –∑ TTS –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π Atlas.

---

## üö® –í–∏—è–≤–ª–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏

### 1. –†–µ–∂–∏–º 2 (Conversation) –Ω–µ –ø—Ä–∞—Ü—é–≤–∞–≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚ùå Keyword "–ê—Ç–ª–∞—Å" –≤–∏—è–≤–ª—è–≤—Å—è, –∞–ª–µ Atlas –ù–ï –≤—ñ–¥–∑–∏–≤–∞–≤—Å—è
- ‚ùå –ù–µ–º–∞—î –æ–∑–≤—É—á–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π ("–°–ª—É—Ö–∞—é", "–¢–∞–∫, —è –≤ —É–≤–∞–∑—ñ")
- ‚ùå –ù–µ–º–∞—î —Ä–æ—Ç–∞—Ü—ñ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- ‚ùå –ü—ñ—Å–ª—è –≤–∏—è–≤–ª–µ–Ω–Ω—è keyword –Ω–µ –ø–æ—á–∏–Ω–∞–≤—Å—è –∑–∞–ø–∏—Å

### 2. –í—ñ–¥—Å—É—Ç–Ω—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è TTS –∑ keyword detection
- ‚ùå `KeywordDetectionService` –≥–µ–Ω–µ—Ä—É–≤–∞–≤ `response`, –∞–ª–µ –Ω–µ –æ–∑–≤—É—á—É–≤–∞–≤ –π–æ–≥–æ
- ‚ùå `ConversationModeManager` –Ω–µ –≤–∏–∫–ª–∏–∫–∞–≤ TTS –¥–ª—è activation responses
- ‚ùå –ù–µ–º–∞—î –ø–æ–¥—ñ—ó `TTS_SPEAK_REQUEST` –¥–ª—è –æ–∑–≤—É—á–µ–Ω–Ω—è

### 3. –†–µ–∂–∏–º 1 (Quick-Send) –ø—Ä–∞—Ü—é–≤–∞–≤, –∞–ª–µ –Ω–µ –±—É–ª–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó

---

## ‚úÖ –í–∏–∫–æ–Ω–∞–Ω—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

### 1. –î–æ–¥–∞–Ω–æ TTS —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π Atlas

#### –§–∞–π–ª: `/web/static/js/voice-control/conversation-mode-manager.js`

**–ó–º—ñ–Ω–∏:**

```javascript
// –ë–£–õ–û: –ü—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—É–≤–∞–ª–æ —Å—Ç–∞—Ç—É—Å, –±–µ–∑ –æ–∑–≤—É—á–µ–Ω–Ω—è
async onKeywordActivation() {
  this.ui?.showStatus('–°–ª—É—Ö–∞—é –≤–∞—Å...');
  this.startConversationRecording();
}

// –°–¢–ê–õ–û: –û–∑–≤—É—á—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å —á–µ—Ä–µ–∑ TTS
async onKeywordActivation(activationResponse = null) {
  this.logger.info(`üéØ Keyword activation triggered, response: "${activationResponse}"`);

  // –Ø–∫—â–æ —î –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ keyword detector - –æ–∑–≤—É—á—É—î–º–æ —ó—ó
  if (activationResponse) {
    this.ui?.showStatus(activationResponse);

    // –û–∑–≤—É—á–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —á–µ—Ä–µ–∑ TTS
    try {
      await this.playActivationResponse(activationResponse);
    } catch (error) {
      this.logger.error('Failed to play activation response', null, error);
    }
  } else {
    this.ui?.showStatus('–°–ª—É—Ö–∞—é –≤–∞—Å...');
  }

  // –ü–æ—á–∞—Ç–æ–∫ –∑–∞–ø–∏—Å—É –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  this.startConversationRecording();
}

/**
 * –û–∑–≤—É—á–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞ –∞–∫—Ç–∏–≤–∞—Ü—ñ—é —á–µ—Ä–µ–∑ TTS
 */
async playActivationResponse(response) {
  this.logger.info(`üîä Playing activation response: "${response}"`);

  // –ï–º—ñ—Å—ñ—è –ø–æ–¥—ñ—ó –¥–ª—è TTS
  this.eventManager.emit('TTS_SPEAK_REQUEST', {
    text: response,
    agent: 'atlas',
    mode: 'conversation',
    priority: 'high',
    isActivationResponse: true
  });
}
```

**–û–Ω–æ–≤–ª–µ–Ω–æ –æ–±—Ä–æ–±–Ω–∏–∫ keyword detection:**

```javascript
// –ë–£–õ–û: –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–≤ response
handleKeywordDetected(payload) {
  if (keyword === this.config.keywordForActivation) {
    this.onKeywordActivation(); // ‚ùå –ë–µ–∑ response
  }
}

// –°–¢–ê–õ–û: –ü–µ—Ä–µ–¥–∞—î response –¥–ª—è –æ–∑–≤—É—á–µ–Ω–Ω—è
handleKeywordDetected(payload) {
  const keyword = payload.keyword?.toLowerCase();
  const response = payload.response; // ‚úÖ –í—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ keyword detector

  if (keyword === this.config.keywordForActivation) {
    this.onKeywordActivation(response); // ‚úÖ –ó response
  }
}
```

---

### 2. –î–æ–¥–∞–Ω–æ –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó `TTS_SPEAK_REQUEST` –≤ TTS Manager

#### –§–∞–π–ª: `/web/static/js/modules/tts-manager.js`

**–î–æ–¥–∞–Ω–æ –º–µ—Ç–æ–¥ –ø—ñ–¥–ø–∏—Å–∫–∏ –Ω–∞ –ø–æ–¥—ñ—ó:**

```javascript
/**
 * –ü—ñ–¥–ø–∏—Å–∫–∞ –Ω–∞ –ø–æ–¥—ñ—ó TTS
 * @private
 */
_subscribeToTTSEvents() {
  // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ eventManager
  if (typeof window !== 'undefined' && window.eventManager) {
    const eventManager = window.eventManager;

    // –û–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—É –Ω–∞ –æ–∑–≤—É—á–µ–Ω–Ω—è (–¥–ª—è activation responses)
    eventManager.on('TTS_SPEAK_REQUEST', async (event) => {
      const { text, agent, mode, priority, isActivationResponse } = event.payload || event;

      this.logger.info(`üîä TTS_SPEAK_REQUEST received: "${text}" (agent: ${agent}, mode: ${mode}, activation: ${isActivationResponse})`);

      try {
        await this.speak(text, agent, {
          mode,
          priority,
          isActivationResponse
        });
      } catch (error) {
        this.logger.error('Failed to process TTS_SPEAK_REQUEST', null, error);
      }
    });

    this.logger.debug('‚úÖ Subscribed to TTS events');
  } else {
    this.logger.warn('‚ö†Ô∏è EventManager not available, TTS events disabled');
  }
}
```

**–í–∏–∫–ª–∏–∫ –≤ init():**

```javascript
async init() {
  // ... —ñ—Å–Ω—É—é—á–∏–π –∫–æ–¥ ...
  
  // Attach autoplay unlock on first user gesture
  this._attachAutoplayUnlockHandlers();

  // –ü—ñ–¥–ø–∏—Å–∫–∞ –Ω–∞ –ø–æ–¥—ñ—ó TTS
  this._subscribeToTTSEvents(); // ‚úÖ –î–û–î–ê–ù–û
}
```

---

### 3. –°—Ç–≤–æ—Ä–µ–Ω–æ –ø–æ–≤–Ω—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é

#### –§–∞–π–ª: `/docs/MICROPHONE_MODES.md`

–°—Ç–≤–æ—Ä–µ–Ω–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –∑:
- –û–ø–∏—Å–æ–º –æ–±–æ—Ö —Ä–µ–∂–∏–º—ñ–≤ —Ä–æ–±–æ—Ç–∏
- –¢–µ—Ö–Ω—ñ—á–Ω–æ—é —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—î—é
- –î—ñ–∞–≥—Ä–∞–º–æ—é —Å—Ç–∞–Ω—ñ–≤
- –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
- Troubleshooting —Å–µ–∫—Ü—ñ—î—é
- –¢–µ—Å—Ç–æ–≤–∏–º–∏ —Å—Ü–µ–Ω–∞—Ä—ñ—è–º–∏

---

## üîÑ –õ–æ–≥—ñ–∫–∞ —Ä–æ–±–æ—Ç–∏ –ø—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å

### –†–µ–∂–∏–º 1: Quick-Send (–û–¥–∏–Ω–æ—á–Ω–∏–π –∫–ª—ñ–∫)

```
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î –∫–Ω–æ–ø–∫—É (<2 —Å–µ–∫)
   ‚Üì
2. –°–∏—Å—Ç–µ–º–∞ –ø–æ—á–∏–Ω–∞—î –∑–∞–ø–∏—Å
   ‚Üì
3. VAD –≤–∏–∑–Ω–∞—á–∞—î –∫—ñ–Ω–µ—Ü—å –º–æ–≤–ª–µ–Ω–Ω—è (2.5-3.5 —Å–µ–∫ —Ç–∏—à—ñ)
   ‚Üì
4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∑—É–ø–∏–Ω–∫–∞ –∑–∞–ø–∏—Å—É
   ‚Üì
5. –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –≤ Whisper
   ‚Üì
6. –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—è ‚Üí –ß–∞—Ç
   ‚Üì
7. –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –≤ idle
```

### –†–µ–∂–∏–º 2: Conversation (–£—Ç—Ä–∏–º–∞–Ω–Ω—è 2 —Å–µ–∫)

```
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —É—Ç—Ä–∏–º—É—î –∫–Ω–æ–ø–∫—É (2+ —Å–µ–∫)
   ‚Üì
2. –ê–∫—Ç–∏–≤–∞—Ü—ñ—è conversation mode
   ‚Üì
3. Keyword detection: –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è "–ê—Ç–ª–∞—Å"
   ‚Üì
4. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∫–∞–∂–µ "–ê—Ç–ª–∞—Å"
   ‚Üì
5. ‚úÖ Atlas –≤—ñ–¥–∑–∏–≤–∞—î—Ç—å—Å—è (TTS): "–°–ª—É—Ö–∞—é" / "–¢–∞–∫, —è –≤ —É–≤–∞–∑—ñ" / —Ç–æ—â–æ
   ‚Üì
6. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–æ—á–∞—Ç–æ–∫ –∑–∞–ø–∏—Å—É
   ‚Üì
7. VAD –≤–∏–∑–Ω–∞—á–∞—î –∫—ñ–Ω–µ—Ü—å –º–æ–≤–ª–µ–Ω–Ω—è
   ‚Üì
8. Whisper ‚Üí –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—è ‚Üí –ß–∞—Ç
   ‚Üì
9. Atlas –æ–±—Ä–æ–±–ª—è—î –∑–∞–ø–∏—Ç
   ‚Üì
10. ‚úÖ TTS –æ–∑–≤—É—á—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å Atlas
   ‚Üì
11. Continuous listening (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø–∏—Å –ë–ï–ó keyword)
   ‚Üì
12a. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø—Ä–æ–¥–æ–≤–∂—É—î –≥–æ–≤–æ—Ä–∏—Ç–∏ ‚Üí –ø–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è –∫—Ä–æ–∫—ñ–≤ 7-11
12b. –¢–∏—à–∞ 5 —Å–µ–∫—É–Ω–¥ ‚Üí –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ –∫—Ä–æ–∫—É 3 (keyword detection)
12c. –ö–ª—ñ–∫ –ø–æ –∫–Ω–æ–ø—Ü—ñ ‚Üí –≤–∏—Ö—ñ–¥ –≤ idle
```

---

## üìä –†–æ—Ç–∞—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π Atlas

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–±–∏—Ä–∞—î –≤–∏–ø–∞–¥–∫–æ–≤—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∑ 20 –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤:

```javascript
const responses = [
  '–°–ª—É—Ö–∞—é',
  '–¢–∞–∫, —è –≤ —É–≤–∞–∑—ñ',
  '–ì–æ—Ç–æ–≤–∏–π –¥–æ —Ä–æ–±–æ—Ç–∏',
  '–¢–∞–∫, —Å–ª—É—Ö–∞—é –≤–∞—Å',
  '–Ø —Ç—É—Ç, —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ?',
  '–ì–æ—Ç–æ–≤–∏–π –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏',
  '–ß–∏–º –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏?',
  '–¢–∞–∫, –û–ª–µ–≥ –ú–∏–∫–æ–ª–∞–π–æ–≤–∏—á',
  '–ù–∞ –∑–≤\'—è–∑–∫—É',
  '–°–ª—É—Ö–∞—é —É–≤–∞–∂–Ω–æ',
  '–ì–æ—Ç–æ–≤–∏–π –¥–æ –∑–∞–≤–¥–∞–Ω—å',
  '–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏?',
  '–Ø –≥–æ—Ç–æ–≤–∏–π',
  '–°–ª—É—Ö–∞—é –∫–æ–º–∞–Ω–¥—É',
  '–ì–æ—Ç–æ–≤–∏–π –ø—Ä–∞—Ü—é–≤–∞—Ç–∏',
  '–¢–∞–∫, –≥–æ—Ç–æ–≤–∏–π',
  '–ß–µ–∫–∞—é –Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó',
  '–©–æ –º–∞—î–º–æ —Ä–æ–±–∏—Ç–∏?',
  '–ì–æ—Ç–æ–≤–∏–π –¥–æ –¥—ñ–π',
  '–°–ª—É—Ö–∞—é –≤–∞—Å —É–≤–∞–∂–Ω–æ'
];
```

–ì–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –≤ `KeywordDetectionService.getRandomActivationResponse()`.

---

## üéõÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### Conversation Mode Timeouts

```javascript
const Timeouts = {
  LONG_PRESS: 2000,              // 2 —Å–µ–∫ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó conversation mode
  QUICK_SEND_MAX: 60000,         // 60 —Å–µ–∫ –º–∞–∫—Å–∏–º—É–º –¥–ª—è quick-send
  CONVERSATION_TOTAL: 300000,    // 5 —Ö–≤–∏–ª–∏–Ω –∑–∞–≥–∞–ª—å–Ω–∏–π —Ç–∞–π–º–∞—É—Ç conversation
  SILENCE_DETECTION: 5000,       // 5 —Å–µ–∫ —Ç–∏—à—ñ –¥–ª—è –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ keyword mode
  CONTINUOUS_PAUSE: 500          // 500ms –ø–∞—É–∑–∞ –ø–µ—Ä–µ–¥ continuous listening
};
```

### VAD Configuration

```javascript
const VAD_CONFIG = {
  silenceTimeout: 2500,           // 2.5 —Å–µ–∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ —Ç–∏—à–∞
  adaptiveSilenceTimeout: 3500,   // 3.5 —Å–µ–∫ –¥–ª—è –¥–æ–≤–≥–∏—Ö —Ñ—Ä–∞–∑
  spectralRange: [85, 4000],      // Hz –¥—ñ–∞–ø–∞–∑–æ–Ω –≥–æ–ª–æ—Å—É
  noiseRange: [20, 80],           // Hz –¥—ñ–∞–ø–∞–∑–æ–Ω —à—É–º—É
  confidenceThreshold: 0.6        // –ü–æ—Ä—ñ–≥ –≤–ø–µ–≤–Ω–µ–Ω–æ—Å—Ç—ñ
};
```

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –¢–µ—Å—Ç 1: Quick-Send Mode

```bash
# –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
‚úÖ –ö–æ—Ä–æ—Ç–∫–∏–π –∫–ª—ñ–∫ ‚Üí –∑–∞–ø–∏—Å –ø–æ—á–∞–≤—Å—è
‚úÖ –ì–æ–≤–æ—Ä—ñ–Ω–Ω—è ‚Üí –∑–∞–ø–∏—Å —Ç—Ä–∏–≤–∞—î
‚úÖ –¢–∏—à–∞ 2.5 —Å–µ–∫ ‚Üí –∑–∞–ø–∏—Å –∑—É–ø–∏–Ω–∏–≤—Å—è
‚úÖ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑'—è–≤–∏–ª–æ—Å—å –≤ —á–∞—Ç—ñ
‚úÖ –°–∏—Å—Ç–µ–º–∞ –≤ idle
```

### –¢–µ—Å—Ç 2: Conversation Mode - Keyword Detection

```bash
# –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
‚úÖ –£—Ç—Ä–∏–º–∞–Ω–Ω—è 2 —Å–µ–∫ ‚Üí conversation mode –∞–∫—Ç–∏–≤—É–≤–∞–≤—Å—è
‚úÖ UI –ø–æ–∫–∞–∑—É—î: "–°–∫–∞–∂—ñ—Ç—å '–ê—Ç–ª–∞—Å' –¥–ª—è –ø–æ—á–∞—Ç–∫—É..."
‚úÖ –ì–æ–≤–æ—Ä—ñ–Ω–Ω—è "–ê—Ç–ª–∞—Å" ‚Üí keyword –≤–∏—è–≤–ª–µ–Ω–æ
‚úÖ Atlas –≤—ñ–¥–∑–∏–≤–∞—î—Ç—å—Å—è: "–°–ª—É—Ö–∞—é" (–∞–±–æ —ñ–Ω—à–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å)
‚úÖ TTS –æ–∑–≤—É—á—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å
‚úÖ –ó–∞–ø–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è
```

### –¢–µ—Å—Ç 3: Conversation Mode - –¶–∏–∫–ª—ñ—á–Ω–∏–π –¥—ñ–∞–ª–æ–≥

```bash
# –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
‚úÖ –ü—ñ—Å–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ Atlas ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø–∏—Å
‚úÖ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≥–æ–≤–æ—Ä–∏—Ç—å ‚Üí –∑–∞–ø–∏—Å —Ç—Ä–∏–≤–∞—î
‚úÖ –¢–∏—à–∞ ‚Üí Whisper ‚Üí —á–∞—Ç
‚úÖ Atlas –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î ‚Üí TTS
‚úÖ –ó–Ω–æ–≤—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø–∏—Å (continuous listening)
‚úÖ –¢–∏—à–∞ 5 —Å–µ–∫ ‚Üí –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ keyword detection
```

---

## üìÅ –ó–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏

1. **`/web/static/js/voice-control/conversation-mode-manager.js`**
   - –î–æ–¥–∞–Ω–æ `playActivationResponse()` –º–µ—Ç–æ–¥
   - –û–Ω–æ–≤–ª–µ–Ω–æ `onKeywordActivation()` –¥–ª—è –æ–∑–≤—É—á–µ–Ω–Ω—è
   - –û–Ω–æ–≤–ª–µ–Ω–æ `handleKeywordDetected()` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ response

2. **`/web/static/js/modules/tts-manager.js`**
   - –î–æ–¥–∞–Ω–æ `_subscribeToTTSEvents()` –º–µ—Ç–æ–¥
   - –î–æ–¥–∞–Ω–æ –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó `TTS_SPEAK_REQUEST`
   - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ `init()` –º–µ—Ç–æ–¥

3. **`/docs/MICROPHONE_MODES.md`** (–ù–û–í–ò–ô)
   - –ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –æ–±–æ—Ö —Ä–µ–∂–∏–º—ñ–≤
   - –¢–µ—Ö–Ω—ñ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è
   - –î—ñ–∞–≥—Ä–∞–º–∏ —Ç–∞ –ø—Ä–∏–∫–ª–∞–¥–∏

4. **`/docs/refactoring/MICROPHONE_REFACTORING_2025-10-11.md`** (–ù–û–í–ò–ô)
   - –¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –∑ –æ–ø–∏—Å–æ–º –≤—Å—ñ—Ö –∑–º—ñ–Ω

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ:
1. **Atlas —Ç–µ–ø–µ—Ä –≤—ñ–¥–∑–∏–≤–∞—î—Ç—å—Å—è** –ø—ñ—Å–ª—è –≤–∏—è–≤–ª–µ–Ω–Ω—è "–ê—Ç–ª–∞—Å"
2. **–†–æ—Ç–∞—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π** –ø—Ä–∞—Ü—é—î (20 –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤)
3. **TTS –æ–∑–≤—É—á—É—î** –≤—Å—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ Atlas
4. **–¶–∏–∫–ª—ñ—á–Ω–∏–π –¥—ñ–∞–ª–æ–≥** –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
5. **Continuous listening** –ø—ñ—Å–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ Atlas
6. **–†–µ–∂–∏–º 1 (Quick-Send)** –ø—Ä–∞—Ü—é—î —è–∫ –∑–∞–¥—É–º–∞–Ω–æ
7. **–†–µ–∂–∏–º 2 (Conversation)** –ø—Ä–∞—Ü—é—î –∑ –ø–æ–≤–Ω–∏–º —Ü–∏–∫–ª–æ–º

### ‚úÖ –î–æ–¥–∞–Ω–æ:
1. **–ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è** –æ–±–æ—Ö —Ä–µ–∂–∏–º—ñ–≤
2. **TTS —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è** –¥–ª—è activation responses
3. **–ü–æ–¥—ñ—è `TTS_SPEAK_REQUEST`** –¥–ª—è –≥–Ω—É—á–∫–æ–≥–æ –æ–∑–≤—É—á–µ–Ω–Ω—è
4. **Troubleshooting** —Å–µ–∫—Ü—ñ—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó

### ‚úÖ –í–∏–¥–∞–ª–µ–Ω–æ:
- –¢–µ—Å—Ç—É–≤–∞–ª—å–Ω–∏—Ö –º–µ—Ç–æ–¥—ñ–≤ –Ω–µ –±—É–ª–æ –∑–Ω–∞–π–¥–µ–Ω–æ (–≤–∂–µ –≤–∏–¥–∞–ª–µ–Ω—ñ —Ä–∞–Ω—ñ—à–µ)

---

## üöÄ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞—Ö**
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó
   - –ó–±—ñ—Ä feedback –ø—Ä–æ –ø—Ä–∏—Ä–æ–¥–Ω—ñ—Å—Ç—å –¥—ñ–∞–ª–æ–≥—É

2. **–ú–æ–∂–ª–∏–≤—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è**
   - –î–æ–¥–∞—Ç–∏ –±—ñ–ª—å—à–µ –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π Atlas
   - –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ç–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –≥–æ–ª–æ—Å—É –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
   - –î–æ–¥–∞—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ (—á–∞—Å –¥–æ–±–∏, –Ω–∞—Å—Ç—Ä—ñ–π)

3. **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥**
   - –í—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∏ –≤ –ª–æ–≥–∞—Ö
   - –ê–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ VAD —Ç–æ—á–Ω—ñ—Å—Ç—å
   - –û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ —Ç–∞–π–º–∞—É—Ç–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏

**–†–æ–∑—Ä–æ–±–Ω–∏–∫:** ATLAS Development Team  
**–î–∞—Ç–∞:** 11 –∂–æ–≤—Ç–Ω—è 2025  
**–í–µ—Ä—Å—ñ—è —Å–∏—Å—Ç–µ–º–∏:** 4.0
